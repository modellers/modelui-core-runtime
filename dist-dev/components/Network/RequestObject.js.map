{"version":3,"file":"RequestObject.js","sources":["../../../src/components/Network/RequestObject.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\n// event handler\nimport Event from '../../event/Event'\nimport { StateLess } from '../../event/StateBase'\n\nexport const triggers = {\n  read: {\n    alias: [],\n    info: {\n      name: 'Read',\n      description: 'Read XML returning JSON'\n    },\n    schema: {}\n  },\n  convert: {\n    alias: [],\n    info: {\n      name: 'Convert',\n      description: 'Converts JSON to XML'\n    },\n    schema: {}\n  }\n}\n\nexport const events = {\n  reading: {\n    alias: [],\n    info: {\n      name: 'reading',\n      description: 'Reading the XML and returning XML'\n    },\n    schema: {}\n  },\n  read: {\n    alias: [],\n    info: {\n      name: 'read',\n      description: 'Read the XML and returning XML'\n    },\n    schema: {}\n  },\n  failure_reading: {\n    alias: [],\n    info: {\n      name: 'Reading XML failed',\n      description: 'Parsing the XML faild'\n    },\n    schema: {}\n  },\n  converting: {\n    alias: [],\n    info: {\n      name: 'Converting',\n      description: 'Converting the JSON to XML'\n    },\n    schema: {}\n  },\n  converted: {\n    alias: [],\n    info: {\n      name: 'Converted',\n      description: 'Converted the JSON to XML'\n    },\n    schema: {}\n  },\n  failure_converting: {\n    alias: [],\n    info: {\n      name: 'Failure Converting',\n      description: 'Convertion the JSON to XML failed'\n    },\n    schema: {}\n  }\n}\n\nexport const options = {\n  id: 'object-request',\n  $schema: 'http://json-schema.org/draft-07/schema#',\n  description: 'XML Parser options',\n  'x-layout': 'component',\n  type: 'object',\n  version: 0.1,\n  properties: {},\n  required: []\n}\n\nexport class StateREST extends StateLess {\n  // NOTE: idea is that the StateREST is a generic instance that can be reused running scripts\n\n  constructor(props) {\n    super(props)\n    this.props = props\n    // apply initial values\n    this.state = {}\n  }\n\n  registerComponent = (actionHandlers, eventHandlers, component_info) => {\n    actionHandlers = actionHandlers || {}\n    eventHandlers = eventHandlers || {}\n    // add our known handlers\n    // register componenet overiding or adding new event handlers\n\n    const dataActionHandlers = {\n      read: {\n        schema: {},\n        handler: (obj) => {\n          this.triggerEvent('reading', { id: obj.id, xml: obj.xml })\n        }\n      },\n      convert: {\n        schema: {},\n        handler: (obj) => {\n          this.triggerEvent('converting', { id: obj.id, json: obj.json })\n        }\n      }\n    }\n\n    // register componenet overiding or adding new event handlers\n    this.ddEvent = Event.EventManager.getInstance().register(\n      this.props.id,\n      { ...dataActionHandlers, ...actionHandlers },\n      { ...events, ...eventHandlers },\n      component_info\n    )\n    return this.ddEvent\n  }\n}\n\nexport const config = {\n  name: 'Object Request',\n  type: 'object-request',\n  author: 'Kjartan JÃ³nsson',\n  description: 'JSON Web request',\n  version: 0.1,\n  relation: {\n    contains: [],\n    within: 'component' // parent\n  },\n  options: options,\n  state: StateREST\n}\n\nexport function RequestObject(props) {\n  const stateREST = new StateREST(props)\n  stateREST.registerComponent({}, {}, config)\n  return stateREST\n}\n"],"names":["events","reading","alias","info","name","description","schema","read","failure_reading","converting","converted","failure_converting","options","id","$schema","type","version","properties","required","StateREST","_StateLess","_inherits","_super","_createSuper","props","_this","_classCallCheck","this","call","_defineProperty","_assertThisInitialized","actionHandlers","eventHandlers","component_info","dataActionHandlers","handler","obj","triggerEvent","xml","convert","json","ddEvent","Event","EventManager","getInstance","register","state","_createClass","StateLess","config","author","relation","contains","within","stateREST","registerComponent"],"mappings":"yMAwBaA,EAAS,CACpBC,QAAS,CACPC,MAAO,GACPC,KAAM,CACJC,KAAM,UACNC,YAAa,qCAEfC,OAAQ,CAAC,GAEXC,KAAM,CACJL,MAAO,GACPC,KAAM,CACJC,KAAM,OACNC,YAAa,kCAEfC,OAAQ,CAAC,GAEXE,gBAAiB,CACfN,MAAO,GACPC,KAAM,CACJC,KAAM,qBACNC,YAAa,yBAEfC,OAAQ,CAAC,GAEXG,WAAY,CACVP,MAAO,GACPC,KAAM,CACJC,KAAM,aACNC,YAAa,8BAEfC,OAAQ,CAAC,GAEXI,UAAW,CACTR,MAAO,GACPC,KAAM,CACJC,KAAM,YACNC,YAAa,6BAEfC,OAAQ,CAAC,GAEXK,mBAAoB,CAClBT,MAAO,GACPC,KAAM,CACJC,KAAM,qBACNC,YAAa,qCAEfC,OAAQ,CAAC,IAIAM,EAAU,CACrBC,GAAI,iBACJC,QAAS,0CACTT,YAAa,qBACb,WAAY,YACZU,KAAM,SACNC,QAAS,GACTC,WAAY,CAAE,EACdC,SAAU,IAGCC,EAAS,SAAAC,GAAAC,YAAAF,EAAAC,GAAA,IAAAE,EAAAC,eAAAJ,GAGpB,SAAAA,EAAYK,GAAO,IAAAC,EAIF,OAJEC,kBAAAC,KAAAR,GACjBM,EAAAH,EAAAM,KAAAD,KAAMH,GAAMK,EAAAA,gBAAAC,EAAAA,uBAAAL,GAAA,qBAMM,SAACM,EAAgBC,EAAeC,GAClDF,EAAiBA,GAAkB,GACnCC,EAAgBA,GAAiB,GAIjC,IAAME,EAAqB,CACzB3B,KAAM,CACJD,OAAQ,CAAE,EACV6B,QAAS,SAACC,GACRX,EAAKY,aAAa,UAAW,CAAExB,GAAIuB,EAAIvB,GAAIyB,IAAKF,EAAIE,KACtD,GAEFC,QAAS,CACPjC,OAAQ,CAAE,EACV6B,QAAS,SAACC,GACRX,EAAKY,aAAa,aAAc,CAAExB,GAAIuB,EAAIvB,GAAI2B,KAAMJ,EAAII,MAC1D,IAWJ,OANAf,EAAKgB,QAAUC,EAAMC,aAAaC,cAAcC,SAC9CpB,EAAKD,MAAMX,GACNqB,iBAAAA,EAAAA,eAAAA,CAAAA,EAAAA,GAAuBH,GACvB/B,iBAAAA,EAAAA,eAAAA,CAAAA,EAAAA,GAAWgC,GAChBC,GAEKR,EAAKgB,WAjCZhB,EAAKD,MAAQA,EAEbC,EAAKqB,MAAQ,GAAErB,CACjB,CAAC,OAAAsB,EAAAA,aAAA5B,EAAA,CARmB,CAAS6B,aA0ClBC,EAAS,CACpB7C,KAAM,iBACNW,KAAM,iBACNmC,OAAQ,kBACR7C,YAAa,mBACbW,QAAS,GACTmC,SAAU,CACRC,SAAU,GACVC,OAAQ,aAEVzC,QAASA,EACTkC,MAAO3B,yBAGF,SAAuBK,GAC5B,IAAM8B,EAAY,IAAInC,EAAUK,GAEhC,OADA8B,EAAUC,kBAAkB,CAAA,EAAI,CAAE,EAAEN,GAC7BK,CACT,2FA7IwB,CACtB/C,KAAM,CACJL,MAAO,GACPC,KAAM,CACJC,KAAM,OACNC,YAAa,2BAEfC,OAAQ,CAAC,GAEXiC,QAAS,CACPrC,MAAO,GACPC,KAAM,CACJC,KAAM,UACNC,YAAa,wBAEfC,OAAQ,CAAC"}