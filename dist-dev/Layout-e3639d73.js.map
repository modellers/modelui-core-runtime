{"version":3,"file":"Layout-e3639d73.js","sources":["../src/layout/LayoutComponent.js","../src/layout/Layout.js"],"sourcesContent":["/* eslint-disable prettier/prettier */\nimport React from 'react'\n\nimport {\n  StateLayout,\n  LayoutBase,\n  events as baseEvents,\n  triggers as baseTriggers\n} from './LayoutBase'\nimport { Layouter } from './Layout'\n\nexport const events = baseEvents\nexport const triggers = baseTriggers\nexport const options = {\n  id: 'layout',\n  $schema: 'http://json-schema.org/draft-07/schema#',\n  description: 'View options',\n  'x-layout': 'component',\n  type: 'object',\n  version: 0.1,\n  properties: {},\n  required: []\n}\n\nexport const config = {\n  name: 'Layout',\n  type: 'layout',\n  author: 'Kjartan JÃ³nsson',\n  description: 'LayoutComponent component',\n  version: 0.1,\n  relation: {\n    contains: [],\n    within: 'component' // parent\n  },\n  options: options,\n  state: StateLayout\n}\n\nclass LayoutComponent extends LayoutBase {\n  /**\n   * Used to manage layout\n   */\n\n  constructor(props) {\n    props.config.options = props.config.options || {}\n    super(props)\n  }\n\n  render() {\n    const { classes } = this.props\n    // return LayoutRender(this.props.id, this.props.data, classes, config, 'div');\n    const container_id = this.props.id\n    const data = this.props.data\n    const ignore = []\n\n    const content = [] // rendered content\n\n    for (const item of this.props.data) {\n      // check if we should skip generating this item by request of the caller. Example dont allow card action to have another card\n      if (ignore.indexOf(item.type) > -1) {\n        console.warn(\n          'Using item type=' +\n          item.type +\n          ' not supported in layout for ' +\n          container_id\n        )\n        continue\n      }\n      // create a component identifier\n      const id = item.id\n      // build the component\n      if (item.type === 'layout') {\n        content.push(\n          <Layouter\n            id={id}\n            key={id}\n            classes={classes}\n            data={data}\n            config={item.config}\n            manager={this.props.manager}\n          />\n        )\n      } else {\n        const item_data = data || {}\n        const params = {\n          id: id,\n          key: id,\n          classes: classes,\n          data: item.data || item_data[item.pick] || item_data,\n          config: item.config,\n          manager: this.props.manager\n        }\n        const component = this.props.manager.getComponentInstance(\n          item.type,\n          params\n        )\n        if (component) {\n          content.push(component)\n        } else {\n          // TODO: notify missing component with type\n        }\n      }\n    }\n    return <div>{content}</div>\n  }\n}\n\nexport default { events, triggers, config, options, LayoutComponent }\n","/* eslint-disable prettier/prettier */\nimport React from 'react'\nimport Manager from './Manager'\nimport LayoutComponent, {\n  events as eventsLayout,\n  triggers as triggersLayout,\n  config as configLayout\n} from './LayoutComponent'\n\nexport function LayoutRender(\n  container_id,\n  data,\n  classes,\n  config,\n  component_manger,\n  wrapper = 'div',\n  ignore = []\n) {\n  const content = [] // rendered content\n  if (!component_manger) {\n    throw new Error('Manager was not passed to LayoutRender')\n  }\n  console.info('-----------FIXME: TODO: IS THIS CODE USED?-----------')\n  for (const item of config.layout) {\n    if (!item) {\n      continue\n    }\n    // check if we should skip generating this item by request of the caller. Example dont allow card action to have another card\n    if (ignore.indexOf(item.type) > -1) {\n      console.warn(\n        'Using item type=' +\n        item.type +\n        ' not supported in layout for ' +\n        container_id\n      )\n      continue\n    }\n    // create a component identifier\n    const id = container_id + (item.id || item.type)\n\n    // build the component\n    if (item.type === 'layout') {\n      content.push(\n        <Layouter\n          id={id}\n          key={id}\n          classes={classes}\n          data={data}\n          manager={component_manger}\n          config={item.config}\n        />\n      )\n    } else {\n      const item_data = data || {}\n      const params = {\n        id: id,\n        key: id,\n        classes: classes,\n        manager: component_manger,\n        data: item.data || item_data[item.pick] || item_data,\n        config: item.config\n      }\n      const component =\n        Manager.ComponentManager.getInstance().getComponentInstance(\n          item.type,\n          params\n        )\n      if (component) {\n        content.push(component)\n      } else {\n        // TODO: notify missing component with type\n      }\n    }\n  }\n  return <div>{content}</div>\n}\n\nexport function Layouter(props) {\n  // style\n  const classes = {}\n  // recursive render\n  return LayoutRender(\n    props.id,\n    props.data,\n    classes,\n    props.config,\n    props.manager,\n    'div'\n  )\n}\n\nexport function registerLayout(component_manager) {\n  // self register component to layout manager\n  component_manager.registerComponent({\n    component: Layout,\n    type: configLayout.type,\n    events: eventsLayout,\n    triggers: triggersLayout,\n    config: configLayout\n  })\n}\n\nexport function Layout(props) {\n  // lets enumerate schema to extract uiSchema and validation\n  return <LayoutComponent {...props} />\n}\n\nexport default { LayoutRender, Layouter, Layout }\n"],"names":["events","baseEvents","triggers","baseTriggers","options","id","$schema","description","type","version","properties","required","config","name","author","relation","contains","within","state","StateLayout","LayoutComponent","_LayoutBase","_inherits","_super","_createSuper","props","_classCallCheck","this","call","_createClass","key","value","_step","classes","container_id","data","ignore","content","_iterator","_createForOfIteratorHelper","s","n","done","item","indexOf","console","warn","push","React","createElement","Layouter","manager","item_data","params","pick","component","getComponentInstance","err","e","f","LayoutBase","LayoutComponent$1","LayoutRender","component_manger","Error","info","layout","Manager","ComponentManager","getInstance","Layout","Layout$1","component_manager","registerComponent","configLayout","eventsLayout","triggersLayout"],"mappings":"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"}