{"version":3,"file":"LayoutComponent.js","sources":["../../src/layout/LayoutComponent.js"],"sourcesContent":["import React from 'react'\n\nimport {\n  StateLayout,\n  LayoutBase,\n  events as baseEvents,\n  triggers as baseTriggers\n} from './LayoutBase'\nimport { Layouter } from './Layout'\n\nconst events = baseEvents\nconst triggers = baseTriggers\nconst options = {\n  id: 'layout',\n  $schema: 'http://json-schema.org/draft-07/schema#',\n  description: 'View options',\n  'x-layout': 'component',\n  type: 'object',\n  version: 0.1,\n  properties: {},\n  required: []\n}\n\nconst config = {\n  name: 'Layout',\n  type: 'layout',\n  author: 'Kjartan JÃ³nsson',\n  description: 'LayoutComponent component',\n  version: 0.1,\n  relation: {\n    contains: [],\n    within: 'component' // parent\n  },\n  options: options,\n  state: StateLayout\n}\n\nclass LayoutComponent extends LayoutBase {\n  /**\n   * Used to manage layout\n   */\n\n  constructor(props) {\n    props.config.options = props.config.options || {}\n    super(props)\n  }\n\n  render() {\n    const { classes } = this.props\n    // return LayoutRender(this.props.id, this.props.data, classes, config, 'div');\n    const container_id = this.props.id\n    const data = this.props.data\n    const ignore = []\n\n    const content = [] // rendered content\n\n    for (const item of this.props.data) {\n      // check if we should skip generating this item by request of the caller. Example dont allow card action to have another card\n      if (ignore.indexOf(item.type) > -1) {\n        console.warn(\n          'Using item type=' +\n            item.type +\n            ' not supported in layout for ' +\n            container_id\n        )\n        continue\n      }\n      // create a component identifier\n      const id = item.id\n      // build the component\n      if (item.type === 'layout') {\n        content.push(\n          <Layouter\n            id={id}\n            key={id}\n            classes={classes}\n            data={data}\n            config={item.config}\n            manager={this.props.manager}\n          />\n        )\n      } else {\n        const item_data = data || {}\n        const params = {\n          id: id,\n          key: id,\n          classes: classes,\n          data: item.data || item_data[item.pick] || item_data,\n          config: item.config,\n          manager: this.props.manager\n        }\n        const component = this.props.manager.getComponentInstance(\n          item.type,\n          params\n        )\n        if (component) {\n          content.push(component)\n        } else {\n          // TODO: notify missing component with type\n        }\n      }\n    }\n    return <div>{content}</div>\n  }\n}\n\nexport default { events, triggers, config, options, LayoutComponent }\n"],"names":["options","id","$schema","description","type","version","properties","required","LayoutComponent$1","events","baseEvents","triggers","baseTriggers","config","name","author","relation","contains","within","state","StateLayout","LayoutComponent","props","_classCallCheck","this","_super","call","_step","classes","container_id","data","ignore","content","_iterator","_createForOfIteratorHelper","s","n","done","item","value","indexOf","console","warn","push","React","createElement","Layouter","key","manager","item_data","params","pick","component","getComponentInstance","err","e","f","LayoutBase"],"mappings":"ihBAYMA,EAAU,CACdC,GAAI,SACJC,QAAS,0CACTC,YAAa,eACb,WAAY,YACZC,KAAM,SACNC,QAAS,GACTC,WAAY,CAPE,EAQdC,SAAU,IAsFGC,EAAA,CAAEC,OAhGFC,EAAAA,OAgGUC,SA/FRC,EAAAA,SA+FkBC,OAnFpB,CACbC,KAAM,SACNV,KAAM,SACNW,OAAQ,kBACRZ,YAAa,4BACbE,QAAS,GACTW,SAAU,CACRC,SAAU,GACVC,OAAQ,aAEVlB,QAASA,EACTmB,MAAOC,EAAAA,aAwEkCpB,QAAAA,EAASqB,qEAhElD,SAAAA,EAAYC,GAAO,OAAAC,kBAAAC,KAAAH,GACjBC,EAAMT,OAAOb,QAAUsB,EAAMT,OAAOb,SAAW,GAD9ByB,EAAAC,KAAAF,KAEXF,EACP,8CAED,WACE,IADOK,EACCC,EAAYJ,KAAKF,MAAjBM,QAEFC,EAAeL,KAAKF,MAAMrB,GAC1B6B,EAAON,KAAKF,MAAMQ,KAClBC,EAAS,GAETC,EAAU,GAEGC,EAAAC,EAAAA,2BAAAV,KAAKF,MAAMQ,MATvB,IASP,IAAoCG,EAAAE,MAAAR,EAAAM,EAAAG,KAAAC,MAAA,CAAA,IAAzBC,EAAyBX,EAAAY,MAElC,GAAIR,EAAOS,QAAQF,EAAKlC,OAAS,EAC/BqC,QAAQC,KACN,mBACEJ,EAAKlC,KACL,gCACAyB,OALN,CAUA,IAAM5B,EAAKqC,EAAKrC,GAEhB,GAAkB,WAAdqC,EAAKlC,KACP4B,EAAQW,KACNC,UAAAC,cAACC,EAAAA,SAAD,CACE7C,GAAIA,EACJ8C,IAAK9C,EACL2B,QAASA,EACTE,KAAMA,EACNjB,OAAQyB,EAAKzB,OACbmC,QAASxB,KAAKF,MAAM0B,eAGnB,CACL,IAAMC,EAAYnB,GAAQ,GACpBoB,EAAS,CACbjD,GAAIA,EACJ8C,IAAK9C,EACL2B,QAASA,EACTE,KAAMQ,EAAKR,MAAQmB,EAAUX,EAAKa,OAASF,EAC3CpC,OAAQyB,EAAKzB,OACbmC,QAASxB,KAAKF,MAAM0B,SAEhBI,EAAY5B,KAAKF,MAAM0B,QAAQK,qBACnCf,EAAKlC,KACL8C,GAEEE,GACFpB,EAAQW,KAAKS,EAIhB,CA5CiC,CA6CnC,CAtDM,CAAA,MAAAE,GAAArB,EAAAsB,EAAAD,EAAA,CAAA,QAAArB,EAAAuB,GAAA,CAuDP,OAAOZ,EAAA,QAAAC,cAAA,MAAA,KAAMb,EACd,QAlE2ByB"}