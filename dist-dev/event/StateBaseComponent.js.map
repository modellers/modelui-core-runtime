{"version":3,"file":"StateBaseComponent.js","sources":["../../src/event/StateBaseComponent.js"],"sourcesContent":["import { Component } from 'react'\n\nclass StateBaseComponent extends Component {\n  /**\n   * Used to manage internal state of avatars\n   */\n  constructor(props) {\n    super(props)\n    this.props = props\n\n    // check for component manager\n    if (!this.props.manager) {\n      const newLocal =\n        'Manager was not provided through props for component ' + this.props.id\n      throw newLocal\n    }\n    /*\n    // make sure the manager is of correct type\n    if (this.props.manager.constructor.name !== 'ComponentManager') {\n      // eslint-disable-next-line no-throw-literal\n      throw (\n        \"Constructor must be component manager. Got '\" +\n        this.props.manager.constructor.name +\n        \"' for component \" +\n        this.props.id\n      )\n    }\n    */\n    // get the state memory manager\n    this.stateManager = this.props.manager\n      .getStateFactory()\n      .getManager(this.props.id)\n    if (!this.stateManager) {\n      throw new Error(\n        \"State manager is missing for component '\" +\n          this.props.id +\n          \"'. Should have been created by traversing layout tree\"\n      )\n    }\n\n    if (this.stateManager) {\n      // apply initial state\n      this.state = this.stateManager.getState()\n    }\n\n    this.eventManager = this.props.manager.getEventManager()\n  }\n\n  componentDidMount = () => {\n    if (this.stateManager) {\n      this.stateManager.doMount(this)\n    }\n  }\n\n  componentWillUnmount = () => {\n    if (this.stateManager) {\n      this.stateManager.unMount(this)\n    }\n  }\n\n  updateView = (action, arr, updated, data) => {\n    // extend by parent\n    return true\n  }\n\n  triggerEvent(event, data, evt) {\n    this.props.manager\n      .getEventManager()\n      .addEvent(this.props.id, event, data, evt)\n  }\n\n  triggerAction(action, data, evt) {\n    this.props.manager\n      .getEventManager()\n      .addAction(this.props.id, action, data, null, evt)\n  }\n\n  register(actions, events, component_info) {\n    this.props.manager\n      .getEventManager()\n      .register(this.props.id, actions, events, component_info)\n  }\n\n  setInstanceState(state) {\n    if (this.stateManager) {\n      this.stateManager.setState(state)\n    }\n  }\n}\n\nexport default { StateBaseComponent }\n"],"names":["StateBaseComponent$1","StateBaseComponent","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","this","call","_defineProperty","_assertThisInitialized","stateManager","doMount","unMount","action","arr","updated","data","manager","id","getStateFactory","getManager","Error","state","getState","eventManager","getEventManager","_createClass","key","value","event","evt","addEvent","addAction","actions","events","component_info","register","setState","Component"],"mappings":"uEA0FeA,EAAA,CAAEC,mBAxFO,SAAAC,GAAAC,YAAAF,EAAAC,GAAA,IAAAE,EAAAC,eAAAJ,GAItB,SAAAA,EAAYK,GAAO,IAAAC,EAKjB,GALiBC,kBAAAC,KAAAR,GACjBM,EAAAH,EAAAM,KAAAD,KAAMH,GAAMK,EAAAA,gBAAAC,EAAAA,uBAAAL,GAAA,qBAyCM,WACdA,EAAKM,cACPN,EAAKM,aAAaC,QAAaF,EAAAA,uBAAAL,OAElCI,EAAAA,gBAAAC,EAAAA,uBAAAL,GAAA,wBAEsB,WACjBA,EAAKM,cACPN,EAAKM,aAAaE,QAAaH,EAAAA,uBAAAL,OAElCI,kBAEYC,EAAAA,uBAAAL,GAAA,cAAA,SAACS,EAAQC,EAAKC,EAASC,GAElC,OAAO,KAtDPZ,EAAKD,MAAQA,GAGRC,EAAKD,MAAMc,QAGd,KADE,wDAA0Db,EAAKD,MAAMe,GAmBzE,GAHAd,EAAKM,aAAeN,EAAKD,MAAMc,QAC5BE,kBACAC,WAAWhB,EAAKD,MAAMe,KACpBd,EAAKM,aACR,MAAM,IAAIW,MACR,2CACEjB,EAAKD,MAAMe,GACX,yDASkD,OALpDd,EAAKM,eAEPN,EAAKkB,MAAQlB,EAAKM,aAAaa,YAGjCnB,EAAKoB,aAAepB,EAAKD,MAAMc,QAAQQ,kBAAiBrB,CAC1D,CAyCC,OAzCAsB,EAAAA,aAAA5B,EAAA,CAAA,CAAA6B,IAAA,eAAAC,MAmBD,SAAaC,EAAOb,EAAMc,GACxBxB,KAAKH,MAAMc,QACRQ,kBACAM,SAASzB,KAAKH,MAAMe,GAAIW,EAAOb,EAAMc,EAC1C,GAAC,CAAAH,IAAA,gBAAAC,MAED,SAAcf,EAAQG,EAAMc,GAC1BxB,KAAKH,MAAMc,QACRQ,kBACAO,UAAU1B,KAAKH,MAAMe,GAAIL,EAAQG,EAAM,KAAMc,EAClD,GAAC,CAAAH,IAAA,WAAAC,MAED,SAASK,EAASC,EAAQC,GACxB7B,KAAKH,MAAMc,QACRQ,kBACAW,SAAS9B,KAAKH,MAAMe,GAAIe,EAASC,EAAQC,EAC9C,GAAC,CAAAR,IAAA,mBAAAC,MAED,SAAiBN,GACXhB,KAAKI,cACPJ,KAAKI,aAAa2B,SAASf,EAE/B,KAACxB,CAAA,CArFqB,kBAAkBwC"}