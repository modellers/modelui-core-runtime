{"version":3,"file":"StateBaseComponent.js","sources":["../../src/event/StateBaseComponent.js"],"sourcesContent":["import { Component } from 'react'\n\nclass StateBaseComponent extends Component {\n  /**\n   * Used to manage internal state of avatars\n   */\n  constructor(props) {\n    super(props)\n    this.props = props\n\n    // check for component manager\n    if (!this.props.manager) {\n      const newLocal =\n        'Manager was not provided through props for component ' + this.props.id\n      throw newLocal\n    }\n    /*\n    // make sure the manager is of correct type\n    if (this.props.manager.constructor.name !== 'ComponentManager') {\n      // eslint-disable-next-line no-throw-literal\n      throw (\n        \"Constructor must be component manager. Got '\" +\n        this.props.manager.constructor.name +\n        \"' for component \" +\n        this.props.id\n      )\n    }\n    */\n    // get the state memory manager\n    this.stateManager = this.props.manager\n      .getStateFactory()\n      .getManager(this.props.id)\n    if (!this.stateManager) {\n      throw new Error(\n        \"State manager is missing for component '\" +\n          this.props.id +\n          \"'. Should have been created by traversing layout tree\"\n      )\n    }\n\n    if (this.stateManager) {\n      // apply initial state\n      this.state = this.stateManager.getState()\n    }\n\n    this.eventManager = this.props.manager.getEventManager()\n  }\n\n  componentDidMount = () => {\n    if (this.stateManager) {\n      this.stateManager.doMount(this)\n    }\n  }\n\n  componentWillUnmount = () => {\n    if (this.stateManager) {\n      this.stateManager.unMount(this)\n    }\n  }\n\n  updateView = (action, arr, updated, data) => {\n    // extend by parent\n    return true\n  }\n\n  triggerEvent(event, data, evt) {\n    this.props.manager\n      .getEventManager()\n      .addEvent(this.props.id, event, data, evt)\n  }\n\n  triggerAction(action, data, evt) {\n    this.props.manager\n      .getEventManager()\n      .addAction(this.props.id, action, data, null, evt)\n  }\n\n  register(actions, events, component_info) {\n    this.props.manager\n      .getEventManager()\n      .register(this.props.id, actions, events, component_info)\n  }\n\n  setInstanceState(state) {\n    if (this.stateManager) {\n      this.stateManager.setState(state)\n    }\n  }\n}\n\nexport default { StateBaseComponent }\n"],"names":["StateBaseComponent$1","StateBaseComponent","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","_defineProperty","_assertThisInitialized","stateManager","doMount","unMount","action","arr","updated","data","manager","id","getStateFactory","getManager","Error","state","getState","eventManager","getEventManager","_createClass","key","value","event","evt","this","addEvent","addAction","actions","events","component_info","register","setState","Component"],"mappings":"uEA0FeA,EAAA,CAAEC,4BAxFOC,GAAAC,YAAAF,EAAAC,GAAA,IAAAE,EAAAC,eAAAJ,GAItB,SAAAA,EAAYK,GAAO,IAAAC,EAKjB,GALiBC,uBAAAP,GACjBM,EAAAH,EAAAK,UAAMH,GAAMI,EAAAA,gBAAAC,EAAAA,uBAAAJ,wBAyCM,WACdA,EAAKK,cACPL,EAAKK,aAAaC,QAAOF,EAAAA,uBAAAJ,OAE5BG,EAAAA,gBAAAC,EAAAA,uBAAAJ,2BAEsB,WACjBA,EAAKK,cACPL,EAAKK,aAAaE,QAAOH,EAAAA,uBAAAJ,OAE5BG,kBAAAC,EAAAA,uBAAAJ,GAEY,cAAA,SAACQ,EAAQC,EAAKC,EAASC,GAElC,OAAO,KAtDPX,EAAKD,MAAQA,GAGRC,EAAKD,MAAMa,QAGd,KADE,wDAA0DZ,EAAKD,MAAMc,GAmBzE,GAHAb,EAAKK,aAAeL,EAAKD,MAAMa,QAC5BE,kBACAC,WAAWf,EAAKD,MAAMc,KACpBb,EAAKK,aACR,MAAM,IAAIW,MACR,2CACEhB,EAAKD,MAAMc,GACX,yDASkD,OALpDb,EAAKK,eAEPL,EAAKiB,MAAQjB,EAAKK,aAAaa,YAGjClB,EAAKmB,aAAenB,EAAKD,MAAMa,QAAQQ,kBAAiBpB,CAC1D,CAyCC,OAzCAqB,EAAAA,aAAA3B,EAAA,CAAA,CAAA4B,IAAA,eAAAC,MAmBD,SAAaC,EAAOb,EAAMc,GACxBC,KAAK3B,MAAMa,QACRQ,kBACAO,SAASD,KAAK3B,MAAMc,GAAIW,EAAOb,EAAMc,EAC1C,GAAC,CAAAH,IAAA,gBAAAC,MAED,SAAcf,EAAQG,EAAMc,GAC1BC,KAAK3B,MAAMa,QACRQ,kBACAQ,UAAUF,KAAK3B,MAAMc,GAAIL,EAAQG,EAAM,KAAMc,EAClD,GAAC,CAAAH,IAAA,WAAAC,MAED,SAASM,EAASC,EAAQC,GACxBL,KAAK3B,MAAMa,QACRQ,kBACAY,SAASN,KAAK3B,MAAMc,GAAIgB,EAASC,EAAQC,EAC9C,GAAC,CAAAT,IAAA,mBAAAC,MAED,SAAiBN,GACXS,KAAKrB,cACPqB,KAAKrB,aAAa4B,SAAShB,EAE/B,KAACvB,CAAA,mBArFuCwC"}