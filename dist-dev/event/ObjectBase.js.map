{"version":3,"file":"ObjectBase.js","sources":["../../src/event/ObjectBase.js"],"sourcesContent":["// event handler\n// TODO: create another version like this one -- https://github.com/dannyconnell/localbase\nimport { StateLess } from './StateBase'\nimport Event from './Event'\nimport { mergeDeep } from '../util/ObjUtil'\nimport { MemoryManager } from '../components/Data/MemoryManager'\n\nexport const triggers = {\n  insert: {\n    alias: [],\n    info: {\n      name: 'Insert',\n      description: 'Insert object'\n    },\n    schema: {}\n  },\n  read: {\n    alias: [],\n    info: {\n      name: 'Read',\n      description: 'Read object'\n    },\n    schema: {}\n  },\n  update: {\n    alias: [],\n    info: {\n      name: 'Update',\n      description: 'Update object'\n    },\n    schema: {}\n  },\n  upsert: {\n    alias: [],\n    info: {\n      name: 'Upsert',\n      description: 'Upsert object'\n    },\n    schema: {}\n  },\n  delete: {\n    alias: [],\n    info: {\n      name: 'Delete',\n      description: 'Delete object'\n    },\n    schema: {}\n  }\n}\n\nexport const events = {\n  invalid: {\n    alias: [],\n    info: {\n      name: 'invalid',\n      description: 'Insert was invalid'\n    },\n    schema: {}\n  },\n  failure: {\n    alias: [],\n    info: {\n      name: 'failure',\n      description: 'Insert was failed'\n    },\n    schema: {}\n  },\n  inserting: {\n    alias: [],\n    info: {\n      name: 'inserting',\n      description: 'Insterting item creates or replaces'\n    },\n    schema: {}\n  },\n  inserted: {\n    alias: [],\n    info: {\n      name: 'inserted',\n      description: 'Inserted item creates or replaces'\n    },\n    schema: {}\n  },\n  reading: {\n    alias: [],\n    info: {\n      name: 'Reading',\n      description: 'Reading identifer'\n    },\n    schema: {}\n  },\n  read: {\n    alias: [],\n    info: {\n      name: 'Read',\n      description: 'Read identifer'\n    },\n    schema: {}\n  },\n  upserting: {\n    alias: [],\n    info: {\n      name: 'upserting',\n      description: 'TBD'\n    },\n    schema: {}\n  },\n  upserted: {\n    alias: [],\n    info: {\n      name: 'upserted',\n      description: 'TBD'\n    },\n    schema: {}\n  },\n  updating: {\n    alias: [],\n    info: {\n      name: 'updating',\n      description: 'TBD'\n    },\n    schema: {}\n  },\n  updated: {\n    alias: [],\n    info: {\n      name: 'updated',\n      description: 'TBD'\n    },\n    schema: {}\n  },\n  deleting: {\n    alias: [],\n    info: {\n      name: 'deleting',\n      description: 'TBD'\n    },\n    schema: {}\n  },\n  deleted: {\n    alias: [],\n    info: {\n      name: 'deleted',\n      description: 'TBD'\n    },\n    schema: {}\n  },\n  missing: {\n    alias: [],\n    info: {\n      name: 'Missing',\n      description: 'Missing read identifer'\n    },\n    schema: {}\n  }\n}\n\n// FIXME: should have state\nexport class StateObject extends StateLess {\n  /*\n    docs = data || {};\n    this.props.id = props.id;\n    schema = props.schema;\n    data = props.data;\n    */\n  // regiser so this is accessible to all transforms\n  // TODO: do this in a nicer way\n\n  constructor(props) {\n    super(props)\n    this.props = props\n    // apply initial values\n    this.state = {\n      data: { docs: props.data, schema: props.data.schema || props.schema },\n      schema: props.schema\n    }\n    // add to globally shared memory (allowing transforms to read data)\n    MemoryManager.getInstance().registerMemory(props.id, this)\n  }\n\n  getData = () => {\n    // Used by memory manager when allowing transformations to read data\n    // Specifically implemented in ObjectCollection\n    return this.getState().data\n  }\n\n  deepMerge = (obj_target, obj_source) => {\n    return mergeDeep(obj_target, obj_source) // { ...obj_target, ...obj_source }\n  }\n\n  raiseSuccessEvent = (event_name, data, evt) => {\n    this.triggerEvent(event_name, data, evt)\n  }\n\n  raiseFailureEvent = (event_name, data, evt) => {\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises\n    this.triggerEvent(event_name, data, evt)\n  }\n\n  isValidDocumentSchema = (doc, schema) => {\n    // returns true if doc validates against schema\n    return true\n  }\n\n  isValidDocumentId = (document_id) => {\n    return document_id !== null && document_id !== undefined\n  }\n\n  getValidDocumentId = (obj) => {\n    if (typeof obj === 'string') {\n      return obj\n    } // this is a string id\n    const obj_id = obj.id || obj.identifier\n    if (this.isValidDocumentId(obj_id)) {\n      return obj_id\n    }\n    return null\n  }\n\n  registerComponent = (actionHandlers, eventHandlers, component_info) => {\n    actionHandlers = actionHandlers || {}\n    eventHandlers = eventHandlers || {}\n    // add our known handlers\n    // register componenet overiding or adding new event handlers\n    const dataActionHandlers = {\n      insert: {\n        schema: {},\n        handler: (objs) => {\n          const self = this\n          function insert_one(obj, docs, schema) {\n            // https://firebase.google.com/docs/firestore/manage-data/add-data\n            const schema_validation = self.isValidDocumentSchema(obj, schema)\n            if (schema_validation) {\n              // notify event: creating - Pending\n              self.raiseSuccessEvent('inserting', obj)\n              // create the id\n              const document_id = self.getValidDocumentId(obj)\n              docs[document_id] = obj\n              self.raiseSuccessEvent('inserted', obj)\n              // TODO: Event: created - Success\n              // TODO: Event: exists - Failure\n              // TODO: Event: failure - Failure\n            } else {\n              // notify event: invalid - Failure validating against schema\n              self.raiseFailureEvent('invalid', obj, {\n                message: 'Document structure is invalid against schema',\n                code: 501,\n                data: {\n                  document: obj,\n                  schema: schema,\n                  reason: schema_validation\n                }\n              })\n            }\n          }\n          if (Array.isArray(objs)) {\n            objs.forEach((obj) => {\n              insert_one(obj, self.state.data.docs, self.state.data.schema)\n            })\n          } // many\n          else {\n            insert_one(objs, self.state.data.docs)\n          } // one\n        }\n      },\n      read: {\n        schema: {},\n        handler: (document_ids) => {\n          // https://firebase.google.com/docs/firestore/query-data/get-data\n          // validate document id\n          const self = this\n          function read_one(document_id, docs) {\n            document_id = self.getValidDocumentId(document_id)\n            if (!document_id) {\n              self.raiseFailureEvent(\n                'invalid',\n                { id: document_id },\n                {\n                  message: 'Document identifier is invalid',\n                  code: 301,\n                  data: { id: document_id }\n                }\n              )\n            } else {\n              // notify event: reading - Pending\n              self.raiseSuccessEvent('reading', { id: document_id })\n              const obj = docs[document_id]\n              if (obj) {\n                // notify event: read - Success\n                try {\n                  self.raiseSuccessEvent('read', obj)\n                } catch (e) {\n                  self.raiseFailureEvent('failure', { id: document_id }, e)\n                }\n              } else {\n                // notify event: missing - Failure\n                self.raiseFailureEvent(\n                  'missing',\n                  { id: document_id },\n                  {\n                    message: 'Document identifier is invalid',\n                    code: 401,\n                    data: { id: document_id }\n                  }\n                )\n              }\n            }\n          }\n          if (Array.isArray(document_ids)) {\n            document_ids.forEach((document_id) => {\n              read_one(\n                document_id,\n                this.state.data.docs,\n                this.state.data.schema\n              )\n            })\n          } // many\n          else {\n            read_one(document_ids, this.state.data.docs)\n          } // one\n        }\n      },\n      update: {\n        schema: {},\n        handler: (objs) => {\n          const self = this\n          function update_one(obj, docs, schema) {\n            // validate obj against schema\n            const schema_validation = self.isValidDocumentSchema(obj, schema)\n            if (schema_validation) {\n              // TODO: Event: invalidated - Failure validating against schema\n              // notify event: updating - Pending\n              const document_id = self.getValidDocumentId(obj)\n              self.raiseSuccessEvent('updating', obj)\n              if (document_id) {\n                const doc = docs[document_id]\n                if (doc) {\n                  try {\n                    docs[document_id] = mergeDeep(doc || {}, obj)\n                    self.raiseSuccessEvent('updated', docs[document_id])\n                  } catch (e) {\n                    self.raiseFailureEvent('error', obj)\n                  }\n                } else {\n                  // notify event: missing - Failure\n                  self.raiseFailureEvent(\n                    'missing',\n                    { id: document_id, data: docs },\n                    {}\n                  )\n                  // TODO: Event: failure - Failure\n                }\n              } else {\n                self.raiseFailureEvent('invalid', obj, {\n                  message: 'Document identifier is invalid',\n                  code: 301,\n                  data: document_id\n                })\n              }\n            } else {\n            }\n          }\n          if (Array.isArray(objs)) {\n            objs.forEach((obj) => {\n              update_one(obj, this.state.data.docs, this.state.data.schema)\n            })\n          } // many\n          else {\n            update_one(objs, this.state.data.docs, this.state.data.schema)\n          } // one\n        }\n      },\n      upsert: {\n        schema: {},\n        handler: (objs) => {\n          const self = this\n          function upsert_one(obj, docs, schema) {\n            // validate document id\n            const schema_validation = self.isValidDocumentSchema(obj, schema)\n            if (schema_validation) {\n              // Event: upserting - Pending\n              self.raiseSuccessEvent('upserting', obj)\n              const document_id = self.getValidDocumentId(obj)\n              if (document_id) {\n                const doc = docs[document_id]\n                try {\n                  docs[document_id] = self.deepMerge(doc || {}, obj)\n                  self.raiseSuccessEvent('upserted', docs[document_id])\n                } catch (e) {\n                  self.raiseFailureEvent('failure', obj, e)\n                }\n              }\n            } else {\n              // notify event: invalid - Failure validating against schema\n              self.raiseFailureEvent('invalid', obj, {\n                message: 'Document structure is invalid against schema',\n                code: 501,\n                data: {\n                  document: obj,\n                  schema: schema,\n                  reason: schema_validation\n                }\n              })\n            }\n          }\n          if (Array.isArray(objs)) {\n            objs.forEach((obj) => {\n              upsert_one(obj, this.state.data.docs, this.state.data.schema)\n            })\n          } // many\n          else {\n            upsert_one(objs, this.state.data.docs, this.state.data.schema)\n          } // one\n        }\n      },\n      delete: {\n        schema: {},\n        handler: (document_ids) => {\n          const self = this\n          function delete_one(document_id, docs) {\n            // https://firebase.google.com/docs/firestore/manage-data/delete-data\n            // validate document id\n            document_id = self.getValidDocumentId(document_id)\n            if (document_id) {\n              // Event: deleting - Pending\n              self.raiseSuccessEvent('deleting', { id: document_id })\n              const doc = docs[document_id]\n              // Do the actuall deletion\n              if (doc) {\n                // TODO: check if this exist\n                delete docs[document_id]\n                self.raiseSuccessEvent('deleted', { id: document_id })\n                // Event: deleted - Success\n                // raiseSuccessEvent('deleted', obj);\n              } else {\n                self.raiseFailureEvent('missing', { id: document_id })\n              }\n            } else {\n              self.raiseFailureEvent(\n                'invalid',\n                { id: document_id },\n                {\n                  message: 'Document identifier is invalid',\n                  code: 301,\n                  data: { id: document_id }\n                }\n              )\n            }\n          }\n          if (Array.isArray(document_ids)) {\n            document_ids.forEach((document_id) => {\n              delete_one(document_id, this.state.data.docs)\n            })\n          } // many\n          else {\n            delete_one(document_ids, this.state.data.docs)\n          } // one\n        }\n      }\n    }\n\n    // register componenet overiding or adding new event handlers\n    this.ddEvent = Event.EventManager.getInstance().register(\n      this.props.id,\n      { ...dataActionHandlers, ...actionHandlers },\n      { ...events, ...eventHandlers },\n      component_info\n    )\n    return this.ddEvent\n  }\n}\n"],"names":["events","invalid","alias","info","name","description","schema","failure","inserting","inserted","reading","read","upserting","upserted","updating","updated","deleting","deleted","missing","StateObject","_StateLess","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","_defineProperty","_assertThisInitialized","getState","data","obj_target","obj_source","mergeDeep","event_name","evt","triggerEvent","doc","document_id","obj","obj_id","id","identifier","isValidDocumentId","actionHandlers","eventHandlers","component_info","dataActionHandlers","insert","handler","objs","self","insert_one","docs","schema_validation","isValidDocumentSchema","raiseSuccessEvent","getValidDocumentId","raiseFailureEvent","message","code","document","reason","Array","isArray","forEach","state","document_ids","read_one","e","update","update_one","upsert","upsert_one","deepMerge","delete","delete_one","ddEvent","Event","EventManager","getInstance","register","_objectSpread","MemoryManager","registerMemory","_createClass","StateLess"],"mappings":"mQAkDaA,EAAS,CACpBC,QAAS,CACPC,MAAO,GACPC,KAAM,CACJC,KAAM,UACNC,YAAa,sBAEfC,OAAQ,CAAC,GAEXC,QAAS,CACPL,MAAO,GACPC,KAAM,CACJC,KAAM,UACNC,YAAa,qBAEfC,OAAQ,CAAC,GAEXE,UAAW,CACTN,MAAO,GACPC,KAAM,CACJC,KAAM,YACNC,YAAa,uCAEfC,OAAQ,CAAC,GAEXG,SAAU,CACRP,MAAO,GACPC,KAAM,CACJC,KAAM,WACNC,YAAa,qCAEfC,OAAQ,CAAC,GAEXI,QAAS,CACPR,MAAO,GACPC,KAAM,CACJC,KAAM,UACNC,YAAa,qBAEfC,OAAQ,CAAC,GAEXK,KAAM,CACJT,MAAO,GACPC,KAAM,CACJC,KAAM,OACNC,YAAa,kBAEfC,OAAQ,CAAC,GAEXM,UAAW,CACTV,MAAO,GACPC,KAAM,CACJC,KAAM,YACNC,YAAa,OAEfC,OAAQ,CAAC,GAEXO,SAAU,CACRX,MAAO,GACPC,KAAM,CACJC,KAAM,WACNC,YAAa,OAEfC,OAAQ,CAAC,GAEXQ,SAAU,CACRZ,MAAO,GACPC,KAAM,CACJC,KAAM,WACNC,YAAa,OAEfC,OAAQ,CAAC,GAEXS,QAAS,CACPb,MAAO,GACPC,KAAM,CACJC,KAAM,UACNC,YAAa,OAEfC,OAAQ,CAAC,GAEXU,SAAU,CACRd,MAAO,GACPC,KAAM,CACJC,KAAM,WACNC,YAAa,OAEfC,OAAQ,CAAC,GAEXW,QAAS,CACPf,MAAO,GACPC,KAAM,CACJC,KAAM,UACNC,YAAa,OAEfC,OAAQ,CAAC,GAEXY,QAAS,CACPhB,MAAO,GACPC,KAAM,CACJC,KAAM,UACNC,YAAa,0BAEfC,OAAQ,CAAC,IAKAa,WAAWC,GAAAC,YAAAF,EAAAC,GAAA,IAAAE,EAAAC,eAAAJ,GAUtB,SAAAA,EAAYK,GAAO,IAAAC,EASyC,OATzCC,uBAAAP,GACjBM,EAAAH,EAAAK,UAAMH,GAAMI,EAAAA,gBAAAC,EAAAA,uBAAAJ,cAWJ,WAGR,OAAOA,EAAKK,WAAWC,QACxBH,EAAAA,gBAAAC,EAAAA,uBAAAJ,gBAEW,SAACO,EAAYC,GACvB,OAAOC,EAASA,UAACF,EAAYC,MAC9BL,EAAAA,gBAAAC,EAAAA,uBAAAJ,GAAA,qBAEmB,SAACU,EAAYJ,EAAMK,GACrCX,EAAKY,aAAaF,EAAYJ,EAAMK,MACrCR,EAAAA,gBAAAC,EAAAA,uBAAAJ,GAAA,qBAEmB,SAACU,EAAYJ,EAAMK,GAErCX,EAAKY,aAAaF,EAAYJ,EAAMK,MACrCR,EAAAA,gBAAAC,EAAAA,uBAAAJ,4BAEuB,SAACa,EAAKhC,GAE5B,OAAO,KACRsB,EAAAA,gBAAAC,EAAAA,uBAAAJ,GAEmB,qBAAA,SAACc,GACnB,OAAOA,WACRX,EAAAA,gBAAAC,EAAAA,uBAAAJ,GAEoB,sBAAA,SAACe,GACpB,GAAmB,iBAARA,EACT,OAAOA,EAET,IAAMC,EAASD,EAAIE,IAAMF,EAAIG,WAC7B,OAAIlB,EAAKmB,kBAAkBH,GAClBA,EAEF,QACRb,EAAAA,gBAAAC,EAAAA,uBAAAJ,GAAA,qBAEmB,SAACoB,EAAgBC,EAAeC,GAClDF,EAAiBA,GAAkB,GACnCC,EAAgBA,GAAiB,GAGjC,IAAME,EAAqB,CACzBC,OAAQ,CACN3C,OAAQ,CAAE,EACV4C,QAAS,SAACC,GACR,IAAMC,EAAIvB,yBAAAJ,GACV,SAAS4B,EAAWb,EAAKc,EAAMhD,GAE7B,IAAMiD,EAAoBH,EAAKI,sBAAsBhB,EAAKlC,GACtDiD,GAEFH,EAAKK,kBAAkB,YAAajB,GAGpCc,EADoBF,EAAKM,mBAAmBlB,IACxBA,EACpBY,EAAKK,kBAAkB,WAAYjB,IAMnCY,EAAKO,kBAAkB,UAAWnB,EAAK,CACrCoB,QAAS,+CACTC,KAAM,IACN9B,KAAM,CACJ+B,SAAUtB,EACVlC,OAAQA,EACRyD,OAAQR,IAIhB,CACIS,MAAMC,QAAQd,GAChBA,EAAKe,SAAQ,SAAC1B,GACZa,EAAWb,EAAKY,EAAKe,MAAMpC,KAAKuB,KAAMF,EAAKe,MAAMpC,KAAKzB,OACxD,IAGA+C,EAAWF,EAAMC,EAAKe,MAAMpC,KAAKuB,KAErC,GAEF3C,KAAM,CACJL,OAAQ,CAAE,EACV4C,QAAS,SAACkB,GAGR,IAAMhB,EAAIvB,yBAAAJ,GACV,SAAS4C,EAAS9B,EAAae,GAE7B,GADAf,EAAca,EAAKM,mBAAmBnB,GAW/B,CAELa,EAAKK,kBAAkB,UAAW,CAAEf,GAAIH,IACxC,IAAMC,EAAMc,EAAKf,GACjB,GAAIC,EAEF,IACEY,EAAKK,kBAAkB,OAAQjB,EAGjC,CAFE,MAAO8B,GACPlB,EAAKO,kBAAkB,UAAW,CAAEjB,GAAIH,GAAe+B,EACzD,MAGAlB,EAAKO,kBACH,UACA,CAAEjB,GAAIH,GACN,CACEqB,QAAS,iCACTC,KAAM,IACN9B,KAAM,CAAEW,GAAIH,IAIpB,MAhCEa,EAAKO,kBACH,UACA,CAAEjB,GAAIH,GACN,CACEqB,QAAS,iCACTC,KAAM,IACN9B,KAAM,CAAEW,GAAIH,IA2BpB,CACIyB,MAAMC,QAAQG,GAChBA,EAAaF,SAAQ,SAAC3B,GACpB8B,EACE9B,EACAd,EAAK0C,MAAMpC,KAAKuB,KAChB7B,EAAK0C,MAAMpC,KAAKzB,OAEpB,IAGA+D,EAASD,EAAc3C,EAAK0C,MAAMpC,KAAKuB,KAE3C,GAEFiB,OAAQ,CACNjE,OAAQ,CAAE,EACV4C,QAAS,SAACC,GACR,IAAMC,EAAIvB,yBAAAJ,GACV,SAAS+C,EAAWhC,EAAKc,EAAMhD,GAG7B,GAD0B8C,EAAKI,sBAAsBhB,EAAKlC,GACnC,CAGrB,IAAMiC,EAAca,EAAKM,mBAAmBlB,GAE5C,GADAY,EAAKK,kBAAkB,WAAYjB,GAC/BD,EAAa,CACf,IAAMD,EAAMgB,EAAKf,GACjB,GAAID,EACF,IACEgB,EAAKf,GAAeL,EAAAA,UAAUI,GAAO,CAAA,EAAIE,GACzCY,EAAKK,kBAAkB,UAAWH,EAAKf,GAGzC,CAFE,MAAO+B,GACPlB,EAAKO,kBAAkB,QAASnB,EAClC,MAGAY,EAAKO,kBACH,UACA,CAAEjB,GAAIH,EAAaR,KAAMuB,GACzB,CAAE,EAIR,MACEF,EAAKO,kBAAkB,UAAWnB,EAAK,CACrCoB,QAAS,iCACTC,KAAM,IACN9B,KAAMQ,GAIZ,CACF,CACIyB,MAAMC,QAAQd,GAChBA,EAAKe,SAAQ,SAAC1B,GACZgC,EAAWhC,EAAKf,EAAK0C,MAAMpC,KAAKuB,KAAM7B,EAAK0C,MAAMpC,KAAKzB,OACxD,IAGAkE,EAAWrB,EAAM1B,EAAK0C,MAAMpC,KAAKuB,KAAM7B,EAAK0C,MAAMpC,KAAKzB,OAE3D,GAEFmE,OAAQ,CACNnE,OAAQ,CAAE,EACV4C,QAAS,SAACC,GACR,IAAMC,EAAIvB,yBAAAJ,GACV,SAASiD,EAAWlC,EAAKc,EAAMhD,GAE7B,IAAMiD,EAAoBH,EAAKI,sBAAsBhB,EAAKlC,GAC1D,GAAIiD,EAAmB,CAErBH,EAAKK,kBAAkB,YAAajB,GACpC,IAAMD,EAAca,EAAKM,mBAAmBlB,GAC5C,GAAID,EAAa,CACf,IAAMD,EAAMgB,EAAKf,GACjB,IACEe,EAAKf,GAAea,EAAKuB,UAAUrC,GAAO,CAAA,EAAIE,GAC9CY,EAAKK,kBAAkB,WAAYH,EAAKf,GAG1C,CAFE,MAAO+B,GACPlB,EAAKO,kBAAkB,UAAWnB,EAAK8B,EACzC,CACF,CACF,MAEElB,EAAKO,kBAAkB,UAAWnB,EAAK,CACrCoB,QAAS,+CACTC,KAAM,IACN9B,KAAM,CACJ+B,SAAUtB,EACVlC,OAAQA,EACRyD,OAAQR,IAIhB,CACIS,MAAMC,QAAQd,GAChBA,EAAKe,SAAQ,SAAC1B,GACZkC,EAAWlC,EAAKf,EAAK0C,MAAMpC,KAAKuB,KAAM7B,EAAK0C,MAAMpC,KAAKzB,OACxD,IAGAoE,EAAWvB,EAAM1B,EAAK0C,MAAMpC,KAAKuB,KAAM7B,EAAK0C,MAAMpC,KAAKzB,OAE3D,GAEFsE,OAAQ,CACNtE,OAAQ,CAAE,EACV4C,QAAS,SAACkB,GACR,IAAMhB,EAAIvB,yBAAAJ,GACV,SAASoD,EAAWtC,EAAae,IAG/Bf,EAAca,EAAKM,mBAAmBnB,KAGpCa,EAAKK,kBAAkB,WAAY,CAAEf,GAAIH,IAC7Be,EAAKf,WAIRe,EAAKf,GACZa,EAAKK,kBAAkB,UAAW,CAAEf,GAAIH,KAIxCa,EAAKO,kBAAkB,UAAW,CAAEjB,GAAIH,KAG1Ca,EAAKO,kBACH,UACA,CAAEjB,GAAIH,GACN,CACEqB,QAAS,iCACTC,KAAM,IACN9B,KAAM,CAAEW,GAAIH,IAIpB,CACIyB,MAAMC,QAAQG,GAChBA,EAAaF,SAAQ,SAAC3B,GACpBsC,EAAWtC,EAAad,EAAK0C,MAAMpC,KAAKuB,KAC1C,IAGAuB,EAAWT,EAAc3C,EAAK0C,MAAMpC,KAAKuB,KAE7C,IAWJ,OANA7B,EAAKqD,QAAUC,EAAMC,aAAaC,cAAcC,SAC9CzD,EAAKD,MAAMkB,GAAEyC,iBAAAA,EAAAA,eAAA,CAAA,EACRnC,GAAuBH,GAAcsC,iBAAAA,EAAAA,kBACrCnF,GAAW8C,GAChBC,GAEKtB,EAAKqD,WA1SZrD,EAAKD,MAAQA,EAEbC,EAAK0C,MAAQ,CACXpC,KAAM,CAAEuB,KAAM9B,EAAMO,KAAMzB,OAAQkB,EAAMO,KAAKzB,QAAUkB,EAAMlB,QAC7DA,OAAQkB,EAAMlB,QAGhB8E,gBAAcH,cAAcI,eAAe7D,EAAMkB,GAAEb,EAAAA,uBAAAJ,IAAOA,CAC5D,CAAC,OAAA6D,EAAAA,aAAAnE,EAAA,EApB8BoE,EAASA,mEAvJlB,CACtBtC,OAAQ,CACN/C,MAAO,GACPC,KAAM,CACJC,KAAM,SACNC,YAAa,iBAEfC,OAAQ,CAAC,GAEXK,KAAM,CACJT,MAAO,GACPC,KAAM,CACJC,KAAM,OACNC,YAAa,eAEfC,OAAQ,CAAC,GAEXiE,OAAQ,CACNrE,MAAO,GACPC,KAAM,CACJC,KAAM,SACNC,YAAa,iBAEfC,OAAQ,CAAC,GAEXmE,OAAQ,CACNvE,MAAO,GACPC,KAAM,CACJC,KAAM,SACNC,YAAa,iBAEfC,OAAQ,CAAC,GAEXsE,OAAQ,CACN1E,MAAO,GACPC,KAAM,CACJC,KAAM,SACNC,YAAa,iBAEfC,OAAQ,CAAC"}