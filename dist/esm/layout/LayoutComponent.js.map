{"version":3,"file":"LayoutComponent.js","sources":["../../../src/layout/LayoutComponent.js"],"sourcesContent":["/* eslint-disable prettier/prettier */\nimport React from 'react'\n\nimport {\n  StateLayout,\n  LayoutBase,\n  events as baseEvents,\n  triggers as baseTriggers\n} from './LayoutBase'\n\nimport { Layouter } from './Layouter'\n\nexport const events = baseEvents\nexport const triggers = baseTriggers\nexport const options = {\n  id: 'layout',\n  $schema: 'http://json-schema.org/draft-07/schema#',\n  description: 'View options',\n  'x-layout': 'component',\n  type: 'object',\n  version: 0.1,\n  properties: {},\n  required: []\n}\n\nexport const config = {\n  name: 'Layout',\n  type: 'layout',\n  author: 'Kjartan JÃ³nsson',\n  description: 'LayoutComponent component',\n  version: 0.1,\n  relation: {\n    contains: [],\n    within: 'component' // parent\n  },\n  options: options,\n  state: StateLayout\n}\n\nclass LayoutComponent extends LayoutBase {\n  /**\n   * Used to manage layout\n   */\n\n  constructor(props) {\n    props.config.options = props.config.options || {}\n    super(props)\n  }\n\n  render() {\n    const { classes } = this.props\n    // return LayoutRender(this.props.id, this.props.data, classes, config, 'div');\n    const container_id = this.props.id\n    const data = this.props.data\n    const ignore = []\n\n    const content = [] // rendered content\n\n    for (const item of this.props.data) {\n      // check if we should skip generating this item by request of the caller. Example dont allow card action to have another card\n      if (ignore.indexOf(item.type) > -1) {\n        console.warn(\n          'Using item type=' +\n          item.type +\n          ' not supported in layout for ' +\n          container_id\n        )\n        continue\n      }\n      // create a component identifier\n      const id = item.id\n      // build the component\n      if (item.type === 'layout') {\n        content.push(\n          <Layouter\n            id={id}\n            key={id}\n            classes={classes}\n            data={data}\n            config={item.config}\n            manager={this.props.manager}\n          />\n        )\n      } else {\n        const item_data = data || {}\n        const params = {\n          id: id,\n          key: id,\n          classes: classes,\n          data: item.data || item_data[item.pick] || item_data,\n          config: item.config,\n          manager: this.props.manager\n        }\n        const component = this.props.manager.getComponentInstance(\n          item.type,\n          params\n        )\n        if (component) {\n          content.push(component)\n        } else {\n          // TODO: notify missing component with type\n        }\n      }\n    }\n    return <div>{content}</div>\n  }\n}\n\nexport default { events, triggers, config, options, LayoutComponent }\n"],"names":["events","baseEvents","triggers","baseTriggers","options","id","$schema","description","type","version","properties","required","config","name","author","relation","contains","within","state","StateLayout","LayoutComponent","_LayoutBase","_inherits","_super","_createSuper","props","_classCallCheck","call","_createClass","key","value","render","classes","container_id","data","ignore","content","_iterator","_createForOfIteratorHelper","_step","s","n","done","item","indexOf","console","warn","push","React","createElement","Layouter","manager","item_data","params","pick","component","getComponentInstance","err","e","f","LayoutBase"],"mappings":"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"}