import{j as e,g as t}from"../_rollupPluginBabelHelpers-55d249d8.js";import o from"react";var n=function(e,t,n,a,r,c,i){if(!i)throw Error("TestUtil._createComponent: Manager was not provided through props for component "+n);if(null!==e&&"function"!=typeof e.create)throw Error("_createComponent is missing renderer function");r.render?e.create(o.createElement(t,{id:n,key:n,data:a,config:{options:r},schema:c,manager:i})):new t({id:n,key:n,data:a,config:{options:r},schema:c,manager:i})},a=function(t,o,a,r,c,i,p,s,l){if(l=l||{render:!0},s=s||{},"function"!=typeof o)throw Error("createComponentClassTests is missing registerComponents");if(null!==a&&"function"!=typeof a.create)throw Error("createComponentClassTests is not a component renderer");t.clearAll(),t.getStateManager().clearAll(),t.getEventManager().clearAll(),o(t);var g=t.getComponent(r.type),x=g.component,y=g.triggers,u=g.events,v=r.type+"_id";return t.getStateManager().clearAll(),t.getStateManager().createState({type:r.type,data:s,id:v,manager:t}),[{title:v+" trigger registration contains same actions as in component trigger export",test:function(){t.getStateManager().clearAll(),n(a,x,v,s,l,p,t);var e=y,o=t.getEventManager().getCopyOfActions();expect(Object.keys(o)).toEqual([v]),expect(Object.keys(o[v])).toEqual(Object.keys(e))}},{title:v+" trigger export registration contains required information",test:function(){var e=y;expect(Object.keys(e)).toEqual(c),Object.keys(e).forEach((function(t,o){expect(Object.keys(e[t])).toContain("info"),expect(Object.keys(e[t].info)).toContain("name"),expect(Object.keys(e[t].info)).toContain("description"),expect(Object.keys(e[t])).toContain("schema"),expect(Object.keys(e[t])).toContain("alias")}))}},{title:v+" component instance has trigger registration handlers",test:function(){t.getStateManager().clearAll(),n(a,x,v,s,l,p,t);var e=y,o=t.getEventManager().getCopyOfActions();Object.keys(e).forEach((function(e,t){expect(Object.keys(o[v][e])).toContain("handler"),expect("function"==typeof o[v][e].handler).toBeTruthy()}))}},{title:v+" event registration",test:function(){var e=i,t=u;expect(Object.keys(t)).toEqual(e),e.forEach((function(e,o){expect(Object.keys(t[e])).toContain("info"),expect(Object.keys(t[e].info)).toContain("name"),expect(Object.keys(t[e].info)).toContain("description"),expect(Object.keys(t[e])).toContain("schema"),expect(Object.keys(t[e])).toContain("alias")}))}},{title:v+" config has options",test:function(){expect(Object.keys(r)).toContain("options");var e=r.options;expect(Object.keys(e)).toContain("id"),expect(Object.keys(e)).toContain("$schema"),expect(Object.keys(e)).toContain("description"),expect(Object.keys(e)).toContain("x-layout"),expect(Object.keys(e)).toContain("type"),expect(Object.keys(e)).toContain("version"),expect(Object.keys(e)).toContain("properties"),expect(Object.keys(e)).toContain("required")}},{title:v+" config has basic info",test:function(){expect(Object.keys(r)).toContain("options"),expect(e(r.name)).toEqual("string"),expect(e(r.type)).toEqual("string"),expect(e(r.author)).toEqual("string"),expect(e(r.description)).toEqual("string"),expect(e(r.version)).toEqual("number"),expect(e(r.author)).toEqual("string"),expect(e(r.relation)).toEqual("object")}},{title:v+" config has relational info",test:function(){expect(Object.keys(r)).toContain("options"),expect(e(r.relation)).toEqual("object"),expect(e(r.relation.within)).toEqual("string")}},{title:v+" option schema is accessible through buildStoreInfo",test:function(){n(a,x,v,s,l,p,t);var o=t.getEventManager().collectComponentInventory();expect(o).toHaveProperty(r.type);var c=o[r.type];expect(e(c.id)).toEqual("string"),expect(e(c.title)).toEqual("string"),expect(e(c.type)).toEqual("string"),expect(e(c.parent)).toEqual("string")}},{title:v+" schema definition is accessible through getComponentSchema",test:function(){var e=t.getEventManager().getComponentSchema(r.type);expect(e).toEqual(r.options)}},{title:v+" events definition is accessible through getComponentEventsByType",test:function(){var e=t.getEventManager().getComponentByType(r.type);expect(e).not.toEqual(void 0),expect(e.actions).toEqual(r.actions)}},{title:v+" actions definition is accessible through getComponentActionsByType",test:function(){var e=t.getEventManager().getComponentByType(r.type);expect(e).not.toEqual(void 0),expect(e.events).toEqual(r.events)}}]},r=function(e,o,n,a,r,c,i,p){return[{title:n+" basic registration info",test:function(){e.clearAll(),e.getStateManager().clearAll(),e.getEventManager().clearAll(),o(e);var t=e.getComponent(n);expect(t).not.toEqual(void 0),expect(t.type).toEqual(n),expect(t.component).toEqual(a),expect(t.config).toEqual(i),expect(t.events).toEqual(c),expect(t.triggers).toEqual(r)}},{title:n+" configuration registration",test:function(){e.clearAll(),e.getStateManager().clearAll(),e.getEventManager().clearAll(),o(e);var t=e.getComponent(n);expect(t).not.toEqual(void 0);var a=t.config;expect(a).toHaveProperty("type"),expect(a).toHaveProperty("name"),expect(a).toHaveProperty("relation"),expect(a.relation).toHaveProperty("within"),expect(a.relation).toHaveProperty("contains")}},{title:n+" matches rendered type and schema",test:function(){e.clearAll(),e.getStateManager().clearAll(),e.getEventManager().clearAll(),o(e);var t=e.getComponent(n);expect(t).not.toEqual(void 0);var a=t.config;expect(a).toHaveProperty("type"),expect(a).toHaveProperty("options"),expect(a.options.id).toEqual(a.type)}},{title:n+" tests option schema",test:function(){if(Object.keys(p).length){e.clearAll(),e.getStateManager().clearAll(),e.getEventManager().clearAll(),o(e);var t=e.getComponent(n);expect(t).not.toEqual(void 0);var a=t.config.options;expect(a).toHaveProperty("id"),expect(a).toHaveProperty("$schema"),expect(a).toHaveProperty("title"),expect(a).toHaveProperty("description"),expect(a).toHaveProperty("x-layout"),expect(a).toHaveProperty("type"),expect(a).toHaveProperty("version"),expect(a).toHaveProperty("properties"),expect(a).toHaveProperty("required"),expect(a["x-layout"]).toEqual("component")}}},{title:n+" tests containing components",test:function(){if(Object.keys(p).length){e.clearAll(),e.getStateManager().clearAll(),e.getEventManager().clearAll(),o(e);var a=e.getComponent(n);expect(a).not.toEqual(void 0);var r=a.config;expect(r).toHaveProperty("contains");for(var c=0,i=Object.entries(p);c<i.length;c++){var s=t(i[c],2),l=s[0];s[1],expect(r.contains).toHaveProperty(l);var g=r.contains[l];expect(g).toHaveProperty("id"),expect(g).toHaveProperty("$schema"),expect(g).toHaveProperty("title"),expect(g).toHaveProperty("description"),expect(g).toHaveProperty("x-layout"),expect(g).toHaveProperty("type"),expect(g).toHaveProperty("version"),expect(g).toHaveProperty("properties"),expect(g).toHaveProperty("required"),expect(g.id).toEqual(l),expect(g["x-layout"]).toEqual("component-item")}}}}]};function c(e,t,o,n,a,r){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));e.getEventManager().register(c,{result:{schema:{},handler:r}},{},{}),e.getEventManager().watch([{component:{id:c,event:"result"},trigger:{id:t,action:o},transform:function(e){return e}},{component:{id:t,event:a},trigger:{id:c,action:"result"},transform:function(e){return e}}]),e.getEventManager().addEvent(c,"result",n,{})}var i={createComponentClassTests:a,createComponentRegisterTests:r,testEventSequence:c};export{a as createComponentClassTests,r as createComponentRegisterTests,i as default,c as testEventSequence};
//# sourceMappingURL=TestUtil.js.map
