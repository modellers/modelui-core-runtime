{"version":3,"file":"StateBaseComponent.js","sources":["../../../src/event/StateBaseComponent.js"],"sourcesContent":["import { Component } from 'react'\n\nclass StateBaseComponent extends Component {\n  /**\n   * Used to manage internal state of avatars\n   */\n  constructor(props) {\n    super(props)\n    this.props = props\n\n    // check for component manager\n    if (!this.props.manager) {\n      const newLocal =\n        'Manager was not provided through props for component ' + this.props.id\n      throw newLocal\n    }\n    /*\n    // make sure the manager is of correct type\n    if (this.props.manager.constructor.name !== 'ComponentManager') {\n      // eslint-disable-next-line no-throw-literal\n      throw (\n        \"Constructor must be component manager. Got '\" +\n        this.props.manager.constructor.name +\n        \"' for component \" +\n        this.props.id\n      )\n    }\n    */\n    // get the state memory manager\n    this.stateManager = this.props.manager\n      .getStateFactory()\n      .getManager(this.props.id)\n    if (!this.stateManager) {\n      throw new Error(\n        \"State manager is missing for component '\" +\n          this.props.id +\n          \"'. Should have been created by traversing layout tree\"\n      )\n    }\n\n    if (this.stateManager) {\n      // apply initial state\n      this.state = this.stateManager.getState()\n    }\n\n    this.eventManager = this.props.manager.getEventManager()\n  }\n\n  componentDidMount = () => {\n    if (this.stateManager) {\n      this.stateManager.doMount(this)\n    }\n  }\n\n  componentWillUnmount = () => {\n    if (this.stateManager) {\n      this.stateManager.unMount(this)\n    }\n  }\n\n  updateView = (action, arr, updated, data) => {\n    // extend by parent\n    return true\n  }\n\n  triggerEvent(event, data, evt) {\n    this.props.manager\n      .getEventManager()\n      .addEvent(this.props.id, event, data, evt)\n  }\n\n  triggerAction(action, data, evt) {\n    this.props.manager\n      .getEventManager()\n      .addAction(this.props.id, action, data, null, evt)\n  }\n\n  register(actions, events, component_info) {\n    this.props.manager\n      .getEventManager()\n      .register(this.props.id, actions, events, component_info)\n  }\n\n  setInstanceState(state) {\n    if (this.stateManager) {\n      this.stateManager.setState(state)\n    }\n  }\n}\n\nexport default { StateBaseComponent }\n"],"names":["StateBaseComponent","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","_defineProperty","_assertThisInitialized","stateManager","doMount","unMount","action","arr","updated","data","manager","newLocal","id","getStateFactory","getManager","Error","state","getState","eventManager","getEventManager","_createClass","key","value","triggerEvent","event","evt","addEvent","triggerAction","addAction","register","actions","events","component_info","setInstanceState","setState","Component"],"mappings":"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"}